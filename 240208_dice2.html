<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>240208 Dice2</title>
    <style>
        #left {
            width: 100px; height: 100px; background-color: antiquewhite;
            text-align: center;
            margin: auto 10px;
        }
        #right {
            width: 100px; height: 100px; background-color: antiquewhite;
            text-align: center;
            margin: auto 10px;
        }
        #myinput { display: block;}
        #file-container { margin: 10px 0;}
    </style>
</head>
<body>
    <div id="file-container">
        <input id="find-file" type="file">
        <button id="set-file" onclick="setFileClick(event, this)">적용</button>
        <input id="myinput" type="text" onkeyup="kup(event, this)">
    </div>
    <div id="container" style="display: flex; margin: 10px 0px;">
        <div id="left" onclick="lr(event, this)">left</div>
        <img id="myimg" src="img/dice/d0.png" alt="" width="150px" height="150px">
        <div id="right" onclick="lr(event, this)">right</div>
    </div>
    <input id="myinput-remove" type="text" onkeyup="myRemove(event, this)"> 이미지 제거
</body>
<script>
    var myimg = document.getElementById('myimg');
    var origin_src = myimg.src;
    var myinput = document.getElementById('myinput');
    var imgarr = ['img/dice/d1.png','img/dice/d2.png','img/dice/d3.png'];

    function myRemove(e, obj) {
        var remove_value = document.getElementById("myinput-remove");
        console.log(remove_value.value);
        
        if(e.keyCode == 13)
        {
            // console.log(imgarr.indexOf(remove_value.value));
            if(imgarr.indexOf(remove_value.value) != -1)
            {
                imgarr.splice(imgarr.indexOf(remove_value.value), 1);
                console.log(imgarr);
            }
            obj.value = "";
        }

    }
    
    function setFileClick(e, obj) {
        var splited = e.target.previousElementSibling.value.split('\\');
        e.target.nextElementSibling.value = "img/dice/" + splited[splited.length-1];
        // console.log("img/dice/" + splited[splited.length-1]);
    }
    

    function kup(e, obj) {
        if(e.keyCode == 13)
        {
            console.log(obj.value);
            for(var i=0; i<imgarr.length; i++){
                if(imgarr[i].endsWith(obj.value)){
                    console.log(i+' idx에 있음');
                    obj.value="";
                    return;
                }
                else{
                    console.log("없음");
                }
            }
            // 중복이 아닐 경우
            imgarr.push(obj.value);
            obj.value="";
        }
        console.log(imgarr);
    }

    function lr(e, th) {
        if (th.id == "left")
        {
            var point = 0;
            if(imgarr.length != 0)  // 이미지 배열에 값이 없으면 실행 안함
            {
                var temp = myimg.src.slice(myimg.src.indexOf("img/dice/"));
                console.log(temp);
        
                // var splited = myimg.src.split("/");
                // console.log(splited, "-----splited");
        
                if (imgarr.indexOf(temp) != -1)
                {
                    point = imgarr.indexOf(temp);
                    // console.log("있음", point);
                    if(point > 0)
                    {
                        point--;
                        myimg.src = imgarr[point];
                    }
                    else    // 현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진 보여줌
                    {
                        point = imgarr.length-1
                        myimg.src = imgarr[point];
                    }
                }
                else    // 현재 이미지가 배열에는 없는 경우
                {
                    console.log("없음", point);     // 시작점을 0으로 잡음
                    myimg.src = imgarr[point];      // 0번째 이미지를 보여줌
                }
            }
            else 
            {
                myimg.src = "img/dice/d0.png";
            }
        }
        else if (th.id == "right")
        {
            var point = 0;
            if(imgarr.length != 0)  // 이미지 배열에 값이 없으면 실행 안함
            {
                var temp = myimg.src.slice(myimg.src.indexOf("img/dice/"));
                console.log(temp);

                // var splited = myimg.src.split("/");
                // console.log(splited, "-----splited");

                if (imgarr.indexOf(temp) != -1)
                {
                    point = imgarr.indexOf(temp);
                    // console.log("있음", point);
                    if(point < imgarr.length-1)
                    {
                        point++;
                        myimg.src = imgarr[point];
                    }
                    else    // 현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진 보여줌
                    {
                        point = 0;
                        myimg.src = imgarr[point];
                    }
                }
                else    // 현재 이미지가 배열에는 없는 경우
                {
                    console.log("없음", point);     // 시작점을 0으로 잡음
                    myimg.src = imgarr[point];      // 0번째 이미지를 보여줌
                }
            }
            else 
            {
                myimg.src = "img/dice/d0.png";
            }
        }
    }
    
    // function l(e) {
    //     var point = 0;
    //     if(imgarr.length != 0)  // 이미지 배열에 값이 없으면 실행 안함
    //     {
    //         var temp = myimg.src.slice(myimg.src.indexOf("img/dice/"));
    //         console.log(temp);

    //         // var splited = myimg.src.split("/");
    //         // console.log(splited, "-----splited");

    //         if (imgarr.indexOf(temp) != -1)
    //         {
    //             point = imgarr.indexOf(temp);
    //             // console.log("있음", point);
    //             if(point > 0)
    //             {
    //                 point--;
    //                 myimg.src = imgarr[point];
    //             }
    //             else    // 현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진 보여줌
    //             {
    //                 point = imgarr.length-1
    //                 myimg.src = imgarr[point];
    //             }
    //         }
    //         else    // 현재 이미지가 배열에는 없는 경우
    //         {
    //             console.log("없음", point);     // 시작점을 0으로 잡음
    //             myimg.src = imgarr[point];      // 0번째 이미지를 보여줌
    //         }
    //     }

    // }

    // function r(e) {
    //     var point = 0;
    //     if(imgarr.length != 0)  // 이미지 배열에 값이 없으면 실행 안함
    //     {
    //         var temp = myimg.src.slice(myimg.src.indexOf("img/dice/"));
    //         console.log(temp);

    //         // var splited = myimg.src.split("/");
    //         // console.log(splited, "-----splited");

    //         if (imgarr.indexOf(temp) != -1)
    //         {
    //             point = imgarr.indexOf(temp);
    //             // console.log("있음", point);
    //             if(point < imgarr.length-1)
    //             {
    //                 point++;
    //                 myimg.src = imgarr[point];
    //             }
    //             else    // 현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진 보여줌
    //             {
    //                 point = 0;
    //                 myimg.src = imgarr[point];
    //             }
    //         }
    //         else    // 현재 이미지가 배열에는 없는 경우
    //         {
    //             console.log("없음", point);     // 시작점을 0으로 잡음
    //             myimg.src = imgarr[point];      // 0번째 이미지를 보여줌
    //         }
    //     }
    //     // console.log(point, "-------------point");
    //     // console.log(imgarr, "-------------imgarr--------------");
    //     // console.log(myimg.src, "----------myimg")
    // }


</script>
</html>